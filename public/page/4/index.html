<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="AngryTester" type="application/atom+xml" />






<meta name="description" content="起点不论好坏，终点始终美好！">
<meta property="og:type" content="website">
<meta property="og:title" content="AngryTester">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="AngryTester">
<meta property="og:description" content="起点不论好坏，终点始终美好！">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="AngryTester">
<meta name="twitter:description" content="起点不论好坏，终点始终美好！">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/4/"/>





  <title>AngryTester</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">AngryTester</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">起点不论好坏，终点始终美好！</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/15/关于持续交付的一些想法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AngryTester">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AngryTester">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/15/关于持续交付的一些想法/" itemprop="url">关于持续交付的一些想法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-15T08:38:53+08:00">
                2017-02-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>去年一年主要做的就是推持续交付思想，今年也将持续，将去年工作中的一些想法记录一下。</p>
<h2 id="一些想法"><a href="#一些想法" class="headerlink" title="一些想法"></a>一些想法</h2><ul>
<li><p>持续交付其实是敏捷思想的一部分，强调小频快，将可交付物切分到最小粒度，通过频繁的提交可供客户验证的交付物频繁接受反馈，从而快速响应做出相应反馈。</p>
</li>
<li><p>持续交付与持续集成的区别在于，持续集成关注的是过程产物的合格与否，而持续交付只关注最终的可交付物，过程只是为了提升最终可交付物合格率的手段而已。</p>
</li>
<li><p>持续交付有一个关键的前提是过程自动化程度要很高，比如自动化单元测试，自动化静态代码扫描，自动化功能测试，自动化性能测试，自动化安全测试，环境自动部署，自动投产等等。</p>
</li>
<li><p>持续交付的最佳实践之一TDD成功开展的前提是单元测试得先推行且需要让项目组成员真正理解单元测试的意义以及具体如何写有效的单元测试，否则很难开展。</p>
</li>
<li><p>单元测试与功能测试虽然都是测试，但是对于最终可交付物质量的影响不大相同，个人理解单元测试更多的是确保代码没问题，功能测试则是希望找出问题，这与软件测试理论里所说的软件测试的目标是一致的。</p>
</li>
<li><p>持续交付实践过程中，快速反馈非常重要，持续交付管道的各个环节，不管是编译，扫描，测试还是部署，投产等等，其实都是“反馈”手段，通过各环节的高度自动化，快速提供反馈，从而降低成本（缺陷修复成本理论）。</p>
</li>
<li><p>自动化测试策略需要根据项目类型确定，不一定都适合金字塔策略，UI对于做自动化冒烟是很合适的。</p>
</li>
<li><p>持续交付思想的落地有多种平台可供选择，但是不管哪种平台，实现的机制基本都类似，需要项目团队共同制订交付标准以及交付流程，并将交付流程尽量自动化，再加上适当的反馈就可以了。</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/13/Jenkins+Ansible完成Windows上tomcat应用部署/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AngryTester">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AngryTester">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/13/Jenkins+Ansible完成Windows上tomcat应用部署/" itemprop="url">Jenkins+Ansible完成Windows服务器上的tomcat应用部署</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-13T14:22:47+08:00">
                2017-02-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Jenkins"><a href="#Jenkins" class="headerlink" title="Jenkins"></a>Jenkins</h2><blockquote>
<p>Jenkins完成代码自动编译打包的任务。</p>
</blockquote>
<h3 id="Jenkins配置注意"><a href="#Jenkins配置注意" class="headerlink" title="Jenkins配置注意"></a>Jenkins配置注意</h3><blockquote>
<p>建议安装的插件包括版本管理（SVN/GIT），邮件，Ansible。<br>在打包成功之后，在后置操作中选择调用Ansible playbook。</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/AngryTester/blog/master/ansible.jpg" alt=""></p>
<h2 id="Ansible"><a href="#Ansible" class="headerlink" title="Ansible"></a>Ansible</h2><blockquote>
<p>Ansible完成war包发送和tomcat的启停。</p>
</blockquote>
<h3 id="Ansible脚本参考"><a href="#Ansible脚本参考" class="headerlink" title="Ansible脚本参考"></a>Ansible脚本参考</h3><p><img src="https://raw.githubusercontent.com/AngryTester/blog/master/d.jpg" alt=""></p>
<h2 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h2><ul>
<li><p>脚本中的async和poll是因为tomcat属于长时应用，在Windows上不会退出，所以脚本结束不了，相当于通过强制手段让进程转后台运行。</p>
</li>
<li><p>由上面一点带来的问题就是Ansible脚本无法正常结束，因此会在Windows上启动一个powershell.exe进城（Ansible就是通过这个与Windows进行通信），随着部署次数增多，Windows上的powershell进城会越来越多，因此建议每次部署完手动杀一下Windows上的powershell进程。这也是当前这个方案最不完善的地方，但是因为我们通常是在一台服务器上多个tomcat，所以这个方案目前主要解决的同服务器上的多应用部署，每次部署只需要处理一次，所以还好。</p>
</li>
<li><p>因此Ansible与Windows通信前需要先关闭Windows防火墙，部署完之后需要开启，所以可以和上一步同时操作。即部署前通过以下命令关闭防火墙：</p>
<p>  <code>netsh firewall set opmode disable</code></p>
<p>  部署完后通过以下命令开启防火墙并杀掉powershell进程：</p>
<p>  <code>netsh firewall set opmode disable</code></p>
<p>  <code>taskkill /f /im powershell.exe</code></p>
</li>
</ul>
<p>##小技巧</p>
<blockquote>
<p>可通过以下shell来轮询环境是否可用</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">STATUS_CODE=0</div><div class="line">while [[ $STATUS_CODE != 200 ]]</div><div class="line">do</div><div class="line">    STATUS_CODE=`curl -o /dev/null -s -w %&#123;http_code&#125; http://localhost:8080/test/`</div><div class="line">done</div></pre></td></tr></table></figure>
<blockquote>
<p>其中<a href="http://localhost:8080/test/为你的环境。" target="_blank" rel="external">http://localhost:8080/test/为你的环境。</a></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/09/基于Jenkins搭建持续交付管道/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AngryTester">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AngryTester">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/09/基于Jenkins搭建持续交付管道/" itemprop="url">基于Jenkins搭建持续交付管道</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-09T08:42:21+08:00">
                2017-02-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Jenkins2-0"><a href="#Jenkins2-0" class="headerlink" title="Jenkins2.0"></a>Jenkins2.0</h2><p>持续交付管道是支撑持续交付流程的基础设施，除了Jenkins，业界还有其他的一些持续集成工具/平台如ThoughtWorks的Go平台以及Travis CI，主要用途就是为了打造交付流水线，所以本身就是支持管道化构建的。在这一点上，Jenkins相对会落后一些，但是在Jenkins2.0版本，及时推出了对管道化构建的支持，即Build Pipeline。通过Jenkins的管道化支持，你可以将你的交付过程中的各个环节串联起来，组成属于你们项目组的交付流程。如下图所示：</p>
<p><img src="https://raw.githubusercontent.com/AngryTester/blog/master/pipeline.png" alt=""></p>
<h2 id="建设过程"><a href="#建设过程" class="headerlink" title="建设过程"></a>建设过程</h2><p>Jenkins的安装和启动就不赘述了，需要使用到的插件是Build Pipeline View，可能存在依赖插件，建议将Jenkins做成一个镜像，便于其他团队复用，避免大量重复配置。</p>
<h3 id="逐个建立构建任务"><a href="#逐个建立构建任务" class="headerlink" title="逐个建立构建任务"></a>逐个建立构建任务</h3><p>将你的交付过程中的各个任务建立成一个一个Job，例如构建、单元测试、Sonar扫描、测试环境部署、自动化冒烟测试等等。为了更快速更准确地定位原因，建议将各种检查尽量分割成独立的Job，例如单元测试和Sonar扫描，本来是可以归成一个Job执行，但是如果这个Job失败，你无法快速准确定位到是单元测试失败还是Sonar扫描失败。</p>
<h3 id="用build-pipeline插件将各个Job连接"><a href="#用build-pipeline插件将各个Job连接" class="headerlink" title="用build pipeline插件将各个Job连接"></a>用build pipeline插件将各个Job连接</h3><p><img src="https://raw.githubusercontent.com/AngryTester/blog/master/pipeline1.png" alt=""></p>
<p>点击图中的加号按钮，新增视图，选择Build Pipeline View</p>
<p><img src="https://raw.githubusercontent.com/AngryTester/blog/master/pipeline2.png" alt=""></p>
<p>通过Select Initial Job选择初始Job，点击保存，一个持续交付管道就建好了。</p>
<p><img src="https://raw.githubusercontent.com/AngryTester/blog/master/pipeline3.png" alt=""></p>
<p>如果你的起始Job还从来没有构建过，你会发现持续交付管道暂时是空的，只要你构建一次，就能看到持续交付管道中已经有了初始Job。</p>
<p><img src="https://raw.githubusercontent.com/AngryTester/blog/master/pipeline4.png" alt=""></p>
<p>初始Job后续的交付流程则通过对Job的依赖关系的管理来实现。</p>
<p>例如初始Job为ci-build，后续job为ci-unittest，则配置ci-build，选择构建后操作-Trigger parameterized build on other projects，Projects to build输入ci-unittest，勾选Trigger build without parameters，保存后这个job就加入到持续交付管道中了。</p>
<p><img src="https://raw.githubusercontent.com/AngryTester/blog/master/pipeline5.png" alt=""></p>
<p>现在你就可以直接通过点击持续交付管道中的Run来触发整个管道了。
　　</p>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>为了保证前序job和后续job是在同一个svn版本号上进行的构建，在对前序job配置时，应该通过传递svn版本号确保前后svn版本号一致。</p>
<p><img src="https://raw.githubusercontent.com/AngryTester/blog/master/pipeline6.png" alt=""></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>持续交付的主要目的是加速交付速度，提升交付质量，所以只要是基于这个目的的流程都是提倡的方向，持续交付管道只是持续交付流程的形式之一。持续交付管道可以快速反馈项目的质量，指导项目组及时发现项目中的问题，根据缺陷修复成本理论，肯定是可以降低项目总体成本的。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/09/Maven构建反应堆及在Jenkins中的用法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AngryTester">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AngryTester">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/09/Maven构建反应堆及在Jenkins中的用法/" itemprop="url">Maven构建反应堆及在Jenkins中的用法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-09T08:15:52+08:00">
                2017-02-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>持续交付管道的意义之一在于快速反馈，但是随着咱们的项目越来越庞大，动辄几十万行代码，构建速度越来越慢，无法满足快速反馈的需求。还好，各种构建工具都提供了按需构建的方案。接下来结合业界使用最广泛的构建工具-Maven，介绍如何通过构建反应堆来提升构建速度。</p>
<p>反应堆(Reactor)是多模块的Maven项目中包含所有构建模块的抽象概念，所以，使用构建反应堆的前提是你的项目是多模块架构的。</p>
<h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><p>（前提是配置好Maven环境变量）</p>
<p>命令中中输入mvn -h可以看到Maven的各种用法，与构建反应堆相关的几个参数如下：</p>
<h3 id="构建指定模块所依赖的其他模块"><a href="#构建指定模块所依赖的其他模块" class="headerlink" title="构建指定模块所依赖的其他模块"></a>构建指定模块所依赖的其他模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">-am,--also-make</div></pre></td></tr></table></figure>
<h3 id="构建依赖指定模块的其他模块"><a href="#构建依赖指定模块的其他模块" class="headerlink" title="构建依赖指定模块的其他模块"></a>构建依赖指定模块的其他模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">-amd,--also-make-dependents	  </div><div class="line">```   </div><div class="line"></div><div class="line">### 指定模块</div></pre></td></tr></table></figure>
<p>-pl,–projects <arg><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">　　</div><div class="line"></div><div class="line">### 如果你需要指定构建module1，module2，则构建命令为：</div><div class="line"></div><div class="line">```　　</div><div class="line">mvn clean install -pl module1,module2</div></pre></td></tr></table></figure></arg></p>
<p>　　</p>
<h3 id="如果你需要指定构建module1和依赖module1的模块，则构建命令为："><a href="#如果你需要指定构建module1和依赖module1的模块，则构建命令为：" class="headerlink" title="如果你需要指定构建module1和依赖module1的模块，则构建命令为："></a>如果你需要指定构建module1和依赖module1的模块，则构建命令为：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn clean install -pl module1 -amd</div></pre></td></tr></table></figure>
<p>　　</p>
<h3 id="如果你需要指定构建module1和module1依赖的模块，则构建命令为："><a href="#如果你需要指定构建module1和module1依赖的模块，则构建命令为：" class="headerlink" title="如果你需要指定构建module1和module1依赖的模块，则构建命令为："></a>如果你需要指定构建module1和module1依赖的模块，则构建命令为：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn clean install -pl module1 -am</div></pre></td></tr></table></figure>
<h2 id="Jenkins中的用法"><a href="#Jenkins中的用法" class="headerlink" title="Jenkins中的用法"></a>Jenkins中的用法</h2><p>在Jenkins中只需要选择Maven项目，然后在构建选项中选中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Incremental build - only build changed modules</div></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/AngryTester/blog/master/maven.png" alt=""></p>
<p>即每次构建会根据本次版本更新涉及模块拼出本次构建命令，如上图所示，如果本次变更模块为p1,p2,则选中增量构建选项后的构建命令为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn clean install -pl p1,p2 module1 -amd</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/09/Maven多模块版本管理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AngryTester">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AngryTester">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/09/Maven多模块版本管理/" itemprop="url">Maven多模块版本管理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-09T08:13:01+08:00">
                2017-02-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>在部门一些项目实践Maven构建反应堆的时候，发现部分项目因为版本号用变量管理的问题导致构建失败。具体情况为：项目组为了子模块与父项目的版本号保持一致，将所有子模块的版本号定义为变量，变量的值则只在父项目的pom文件中定义，这样导致的问题是指定子模块进行构建时，因此获取不到版本号这个变量的值（因为并不构建父项目），因此导致相关依赖无法获取到而构建失败。
　</p>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法　"></a>解决办法　</h2><p>解决办法是将子模块中的版本号均修改为常量，Maven推荐实践版本号也应该使用常量，至于子模块和父项目的版本一致性和管理的问题，可以采用Maven提供的Version插件实现。命令行为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">　　mvn versions:set -DnewVersion=1.1-SNAPSHOT</div></pre></td></tr></table></figure>
<p>通过这个命令行，可以统一对父项目和子模块进行版本号更新，并保持一致。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/08/Ansible对Windows系统的支持/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AngryTester">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AngryTester">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/08/Ansible对Windows系统的支持/" itemprop="url">Ansible对Windows系统的支持</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-08T10:11:48+08:00">
                2017-02-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>因为近期有项目考虑用Ansible做Windows机器上的自动投产，因此对Ansible对Windows系统的支持做了一点研究，记录一下。</p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>从Ansible1.7版本开始支持Windows，原理是通过Windows上的PowerShell和Winrm来远程操作Windows服务器。</p>
</blockquote>
<h2 id="Windows机器配置步骤"><a href="#Windows机器配置步骤" class="headerlink" title="Windows机器配置步骤"></a>Windows机器配置步骤</h2><h3 id="升级PowerShell"><a href="#升级PowerShell" class="headerlink" title="升级PowerShell"></a>升级PowerShell</h3><blockquote>
<p>最好升级到4.0以上<br>下载地址：<a href="http://www.microsoft.com/en-us/download/details.aspx?id=40855" target="_blank" rel="external">http://www.microsoft.com/en-us/download/details.aspx?id=40855</a></p>
</blockquote>
<h3 id="配置Winrm"><a href="#配置Winrm" class="headerlink" title="配置Winrm"></a>配置Winrm</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$powershell</span>.exe -File ConfigureRemotingForAnsible.ps1</div></pre></td></tr></table></figure>
<blockquote>
<p>ConfigureRemotingForAnsible.ps1下载地址： <a href="https://github.com/ansible/ansible/blob/devel/examples/scripts/ConfigureRemotingForAnsible.ps1" target="_blank" rel="external">https://github.com/ansible/ansible/blob/devel/examples/scripts/ConfigureRemotingForAnsible.ps1</a></p>
<p>可能会出现netsh相关报错，请把C:\Windows\System32加入到PATH环境变量。</p>
<p>确认Winrm已开启<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$winrm</span> quickconfig</div></pre></td></tr></table></figure></p>
<p>配置Winrm<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$winrm</span> <span class="built_in">set</span> winrm/config/service/auth <span class="string">'@&#123;Basic="true"&#125;'</span></div><div class="line"><span class="variable">$winrm</span> <span class="built_in">set</span> winrm/config/service/auth <span class="string">'@&#123;Basic="true"&#125;'</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h3><blockquote>
<p>控制面板-系统和安全-Windows 防火墙</p>
</blockquote>
<p>以上Windows机器的配置就完成了。</p>
<h2 id="主控机配置步骤"><a href="#主控机配置步骤" class="headerlink" title="主控机配置步骤"></a>主控机配置步骤</h2><blockquote>
<p>主控机必须是Linux系统，我用的centos7。</p>
</blockquote>
<h3 id="安装Ansible"><a href="#安装Ansible" class="headerlink" title="安装Ansible"></a>安装Ansible</h3><blockquote>
<p>安装rpm源</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$rpm</span> -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</div></pre></td></tr></table></figure>
<blockquote>
<p>安装ansible<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$yum</span> install -y ansible</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="安装pywinrm"><a href="#安装pywinrm" class="headerlink" title="安装pywinrm"></a>安装pywinrm</h3><blockquote>
<p>安装pip<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$yum</span> install -y python-pip</div></pre></td></tr></table></figure></p>
<p>安装pywinrm<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$pip</span> install <span class="string">"pywinrm&gt;=0.1.1"</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="配置hosts"><a href="#配置hosts" class="headerlink" title="配置hosts"></a>配置hosts</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$vi</span> /etc/ansible/hosts</div></pre></td></tr></table></figure>
<blockquote>
<p>参考如下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[win7]</div><div class="line">172.XX.X.XX</div><div class="line"></div><div class="line">[win7:vars]</div><div class="line">ansible_user= &quot;XX&quot;</div><div class="line">ansible_password= &quot;XXXXXXX&quot;</div><div class="line">ansible_ssh_port= 5985</div><div class="line">ansible_connection= winrm</div><div class="line">ansible_winrm_server_cert_validation= ignore</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><blockquote>
<p>主控机测试<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ansible</span> win7 -m win_ping</div></pre></td></tr></table></figure></p>
<p>应该返回如下内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">172.XX.X.XX | SUCCESS =&gt; &#123;</div><div class="line">    &quot;changed&quot;: false,</div><div class="line">    &quot;ping&quot;: &quot;pong&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<p>暂时完成连接，后续再研究playbook相关及实际应用。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/07/Hexo+GitHub搭建blog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AngryTester">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AngryTester">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/07/Hexo+GitHub搭建blog/" itemprop="url">Hexo+GitHub搭建blog</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-07T19:58:48+08:00">
                2017-02-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Hexo和GitHub就不过多介绍了，网上同类教程也不少，只是因为公司有代理，记录一下搭建过程中的注意点。机器为64位Win7。</p>
<h2 id="安装说明"><a href="#安装说明" class="headerlink" title="安装说明"></a>安装说明</h2><h3 id="1-安装Git"><a href="#1-安装Git" class="headerlink" title="1. 安装Git"></a>1. 安装Git</h3><blockquote>
<p>下载地址：<a href="https://git-scm.com/download/win。" target="_blank" rel="external">https://git-scm.com/download/win。</a><br>双击安装完成之后最好将安装路径配置到环境变量中，这样直接就可以在cmd中执行git命令了。</p>
</blockquote>
<h3 id="2-安装node"><a href="#2-安装node" class="headerlink" title="2. 安装node"></a>2. 安装node</h3><blockquote>
<p>下载地址：<a href="https://nodejs.org/dist/v6.9.5/node-v6.9.5-x64.msi" target="_blank" rel="external">https://nodejs.org/dist/v6.9.5/node-v6.9.5-x64.msi</a></p>
</blockquote>
<h3 id="3-配置Git"><a href="#3-配置Git" class="headerlink" title="3. 配置Git"></a>3. 配置Git</h3><blockquote>
<p>因为后面Hexo初始化以及后面Hexo发布都会用到Git，所以如果访问GitHub需要代理，需要提前配置。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$  git config --global user.name “AngryTester”</div><div class="line">$  git config --global user.email “thx_phila@yahoo.com”</div><div class="line">$  git config --global http.proxy http://127.xx.xx.xx</div><div class="line">$  git config --global https.proxy http://127.xx.xx.xx</div></pre></td></tr></table></figure>
<h3 id="4-NPM安装Hexo（代理环境下）"><a href="#4-NPM安装Hexo（代理环境下）" class="headerlink" title="4. NPM安装Hexo（代理环境下）"></a>4. NPM安装Hexo（代理环境下）</h3><blockquote>
<p>新建一个目录blog，并从cmd中进入blog目录，然后执行如下命令,过程中可能有警告，不用care：</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install -g hexo-cli</div></pre></td></tr></table></figure>
<h3 id="5-Hexo初始化"><a href="#5-Hexo初始化" class="headerlink" title="5. Hexo初始化"></a>5. Hexo初始化</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo init</div></pre></td></tr></table></figure>
<h3 id="6-Hexo生成静态文件"><a href="#6-Hexo生成静态文件" class="headerlink" title="6. Hexo生成静态文件"></a>6. Hexo生成静态文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo g</div></pre></td></tr></table></figure>
<h3 id="6-Hexo本地发布"><a href="#6-Hexo本地发布" class="headerlink" title="6. Hexo本地发布"></a>6. Hexo本地发布</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo s</div></pre></td></tr></table></figure>
<blockquote>
<p>访问 <a href="http://localhost:4000" target="_blank" rel="external">http://localhost:4000</a> 就能访问到博客首页了。</p>
</blockquote>
<h3 id="7-Hexo发布到GitHub-Page"><a href="#7-Hexo发布到GitHub-Page" class="headerlink" title="7.Hexo发布到GitHub Page"></a>7.Hexo发布到GitHub Page</h3><blockquote>
<p>首先需要申请一个Github库，库名必须为AngryTester.github.io这种格式，AngryTester为你的用户名。然后修改blog目录下的_config.yml文件，修改如下字段:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">deploy:</div><div class="line">  type: git</div><div class="line">  repository: https://github.com/AngryTester/AngryTester.github.io.git</div><div class="line">  branch: master</div></pre></td></tr></table></figure>
<blockquote>
<p>然后执行如下命令远程发布：</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo d</div></pre></td></tr></table></figure>
<blockquote>
<p>过程中可能需要输入Git用户名密码。</p>
<p>访问 <a href="https://angrytester.github.io/" target="_blank" rel="external">https://angrytester.github.io/</a> 就能访问到你的blog了。</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">AngryTester</p>
              <p class="site-description motion-element" itemprop="description">起点不论好坏，终点始终美好！</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">37</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">47</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">AngryTester</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  
  

  

  

  

</body>
</html>
